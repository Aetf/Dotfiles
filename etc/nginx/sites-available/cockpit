map $http_upgrade $connection_upgrade {
    default upgrade;
    '' close;
}

server {
	listen 80;
	listen [::]:80;
	server_name cockpit.unlimited-code.works;

	return 301 https://$server_name$request_uri;
}

server {
	listen 443 ssl http2;
	listen [::]:443 ssl http2;

	server_name cockpit.unlimited-code.works;

	access_log /var/log/nginx/sites/cockpit.access netdata;
	error_log /var/log/nginx/sites/cockpit.error error;
	rewrite_log on;

    include snippets/cert/unlimited-code.works.conf;

    include sites-common/cockpit;
}

server {
	listen 80;
	listen [::]:80;
	server_name cockpit.unlimitedcodeworks.xyz;

	return 301 https://$server_name$request_uri;
}

server {
	listen 443 ssl http2;
	listen [::]:443 ssl http2;

	server_name cockpit.unlimitedcodeworks.xyz;

	access_log /var/log/nginx/sites/cockpit.access netdata;
	error_log /var/log/nginx/sites/cockpit.error error;
	rewrite_log on;

    include snippets/cert/unlimitedcodeworks.xyz.conf;

    include sites-common/cockpit;
}
